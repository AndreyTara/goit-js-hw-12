{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function pixabayApi(picThema, page, perPage = 20) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: '32923501-8d8c5bf31ee0b7b85cce4fb99',\n    q: picThema,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    page: page,\n    per_page: perPage,\n  });\n\n  const url = `${BASE_URL}?${params.toString()}`;\n  return axios.get(url);\n}\n","export function renderFunction(data, page) {\n  // console.log(data.length);\n  return data\n    .map(\n      (\n        item,\n        index\n      ) => `<a class=\"section-item\" data-source =\"${index}\" data-id=${item.id} href ='${item.largeImageURL}'> \n            <img \n            class=\"section-img\"\n            src=\"${item.webformatURL}\"\n            alt=\"${item.tags}\"\n            >\n            <div class=\"section-soc\">\n             <div class=\"section-info\">\n                <p class=\"section-props\">Likes</p>\n                <span class=\"section-props-count\">${item.likes}</span>\n              </div>\n              <div class=\"section-info\">\n                <p class=\"section-props\">Views</p>\n                <span class=\"section-props-count\">${item.views}</span>\n              </div>\n              <div class=\"section-info\">\n                <p class=\"section-props\">Comments</p>\n                <span class=\"section-props-count\">${item.comments}</span>\n              </div>\n              <div class=\"section-info\">\n                <p class=\"section-props\">Downloads</p>\n                <span class=\"section-props-count\">${item.downloads}</span>\n              </div>\n            </div>\n          </a>`\n    )\n    .join('');\n}\n","//Функція отримання проміса за запитом\nimport { pixabayApi } from './js/pixabay-api.js';\n\n// рендер картинок\nimport { renderFunction } from './js/render-function.js';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний в документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// налаштування IziToast\nconst optionsIziToast = {\n  theme: 'light', // темна тема\n  timeout: 3000, // час прогресс бару\n  title:\n    'Sorry, there are no images matching your search query. Please try again!', //фраза сповіщення\n  titleSize: 16,\n  position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter\n  progressBar: true,\n  displayMode: 'once', // спрацювати 1 раз\n  transitionIn: 'fadeInUp',\n  close: true, // закривання при натисканні на будь-який елемент сповіщення\n};\n\n// налаштування lightBox\nconst lightBox = new SimpleLightbox('.section-list a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  overlayOpacity: 0.3,\n  widthRatio: 0.77,\n  heightRatio: 0.919,\n});\n\nconst refs = {\n  formEl: document.querySelector('.section-form'),\n  listEl: document.querySelector('.section-list'),\n  textEl: document.querySelector('.section-text'),\n  btnEl: document.querySelector('.section-more-btn'),\n};\nconst limitEl = 45;\nconst perPage = 15;\nconst totalHits = Math.ceil(limitEl / perPage);\nlet page = 1;\n\nrefs.formEl.addEventListener('input', function (event) {\n  if (event.target.tagName === 'INPUT' && !event.target.value.trim()) {\n    alert('Please fill the form - input.');\n  }\n});\nrefs.formEl.addEventListener('submit', async e => {\n  e.preventDefault();\n  refs.listEl.innerHTML = '';\n  const themaOfThePics = e.target.elements.query.value;\n  if (!themaOfThePics) {\n    return;\n  }\n  try {\n    refs.textEl.classList.remove('hidden');\n    const res = await pixabayApi(themaOfThePics, page, perPage);\n    const pics = res.data;\n    if (!pics.hits.length) {\n      iziToast.error(optionsIziToast);\n      refs.textEl.classList.add('hidden');\n      return;\n    }\n    if (page >= totalHits) {\n      refs.btnEl.style.display = 'none';\n      return;\n    }\n    const markup = renderFunction(pics.hits, page);\n    refs.listEl.insertAdjacentHTML('beforeend', markup);\n    lightBox.refresh();\n    setTimeout(() => {\n      refs.textEl.classList.add('hidden');\n      refs.textEl.style.order = 1;\n      refs.btnEl.style.display = 'block';\n      toScroll('.section-list');\n    }, 1000);\n  } catch (error) {\n    iziToast.error(optionsIziToast);\n    refs.textEl.classList.add('hidden');\n    console.log(error.message);\n  } finally {\n  }\n});\n\nrefs.btnEl.addEventListener('click', handheSecondSubmit);\n\nasync function handheSecondSubmit(e) {\n  refs.btnEl.disabled = true;\n  e.preventDefault();\n  page++;\n  const themaOfThePics = refs.formEl.elements.query.value;\n  try {\n    if (page > totalHits) {\n      iziToast.error({\n        position: 'topRight',\n        message: \"We're sorry, there are no more posts to load\",\n      });\n      refs.btnEl.style.display = 'none';\n      return;\n    }\n    refs.textEl.classList.remove('hidden');\n    const res = await pixabayApi(themaOfThePics, page, perPage);\n    const pics = res.data;\n    refs.btnEl.style.display = 'none';\n    const markup = renderFunction(pics.hits, page);\n    refs.listEl.insertAdjacentHTML('beforeend', markup);\n    lightBox.refresh();\n    setTimeout(() => {\n      refs.textEl.classList.add('hidden');\n      refs.btnEl.style.display = 'block';\n      toScroll('.section-list');\n    }, 1000);\n  } catch (error) {\n    iziToast.error(optionsIziToast);\n    refs.textEl.classList.add('hidden');\n    refs.btnEl.style.display = 'none';\n    console.log(error);\n  } finally {\n    refs.btnEl.disabled = false;\n  }\n}\n\nfunction toScroll(srtClDom) {\n  // refs.listEl.addEventListener('scroll', fnScroll, { once: true });\n  // function fnScroll() {\n  const heightItem =\n    document.querySelector(`${srtClDom}`).lastChild.clientHeight * 2;\n  window.scrollBy({\n    top: heightItem,\n    left: 0,\n    behavior: 'smooth',\n  });\n  // }\n}\n"],"names":["pixabayApi","picThema","page","perPage","BASE_URL","params","url","axios","renderFunction","data","item","index","optionsIziToast","lightBox","SimpleLightbox","refs","limitEl","totalHits","event","e","themaOfThePics","pics","iziToast","markup","toScroll","error","handheSecondSubmit","srtClDom","heightItem"],"mappings":"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"}