{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function pixabayApi(picThema, page, perPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: '32923501-8d8c5bf31ee0b7b85cce4fb99',\n    q: picThema,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    page: page,\n    per_page: perPage,\n  });\n\n  const url = `${BASE_URL}?${params.toString()}`;\n  return axios.get(url);\n}\n","export function renderFunction(data) {\n  console.log(data.length);\n  return data\n    .map(\n      item => `<a class=\"section-item\" data-id=${item.id} href ='${item.largeImageURL}'> \n            <img \n            class=\"section-img\"\n            src=\"${item.webformatURL}\"\n            alt=\"${item.tags}\"\n            >\n            <div class=\"section-soc\">\n             <div class=\"section-info\">\n                <p class=\"section-props\">Likes</p>\n                <span class=\"section-props-count\">${item.likes}</span>\n              </div>\n              <div class=\"section-info\">\n                <p class=\"section-props\">Views</p>\n                <span class=\"section-props-count\">${item.views}</span>\n              </div>\n              <div class=\"section-info\">\n                <p class=\"section-props\">Comments</p>\n                <span class=\"section-props-count\">${item.comments}</span>\n              </div>\n              <div class=\"section-info\">\n                <p class=\"section-props\">Downloads</p>\n                <span class=\"section-props-count\">${item.downloads}</span>\n              </div>\n            </div>\n          </a>`\n    )\n    .join('');\n}\n","//Функція отримання проміса за запитом\nimport { pixabayApi } from './js/pixabay-api.js';\n\n// рендер картинок\nimport { renderFunction } from './js/render-function.js';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний в документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// налаштування IziToast\nconst optionsIziToast = {\n  theme: 'light', // темна тема\n  timeout: 3000, // час прогресс бару\n  title:\n    'Sorry, there are no images matching your search query. Please try again!', //фраза сповіщення\n  titleSize: 16,\n  position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter\n  progressBar: true,\n  displayMode: 'once', // спрацювати 1 раз\n  transitionIn: 'fadeInUp',\n  close: true, // закривання при натисканні на будь-який елемент сповіщення\n};\n\n// налаштування lightBox\nconst lightBox = new SimpleLightbox('.section-list a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  overlayOpacity: 0.3,\n  widthRatio: 0.77,\n  heightRatio: 0.919,\n});\n\nconst refs = {\n  formEl: document.querySelector('.section-form'),\n  listEl: document.querySelector('.section-list'),\n  textEl: document.querySelector('.section-text'),\n  btnEl: document.querySelector('.section-more-btn'),\n};\nconst perPage = 15;\nconst totalHits = Math.ceil(90 / perPage);\nlet page = 1;\nrefs.formEl.addEventListener('submit', e => {\n  e.preventDefault();\n  refs.listEl.innerHTML = '';\n  const themaOfThePics = e.target.elements.query.value;\n  if (!themaOfThePics) {\n    return;\n  }\n  pixabayApi(themaOfThePics, page, perPage)\n    .then(res => {\n      const pics = res.data;\n      if (!pics.hits.length) {\n        iziToast.error(optionsIziToast);\n        return;\n      }\n      const markup = renderFunction(pics.hits);\n      refs.textEl.classList.remove('hidden');\n      refs.listEl.insertAdjacentHTML('beforeend', markup);\n      lightBox.refresh();\n      setTimeout(() => {\n        refs.textEl.classList.add('hidden');\n        refs.textEl.style.order = 1;\n        refs.btnEl.style.display = 'block';\n      }, 1000);\n    })\n    .catch(error => {\n      iziToast.error(optionsIziToast);\n      console.log(error);\n    });\n});\n\nrefs.btnEl.addEventListener('click', handheSecondSubmit);\nfunction handheSecondSubmit(e) {\n  e.preventDefault();\n  page++;\n  const themaOfThePics = refs.formEl.elements.query.value;\n  pixabayApi(themaOfThePics, page, perPage)\n    .then(res => {\n      if (page > totalHits) {\n        iziToast.error({\n          position: 'topRight',\n          message: \"We're sorry, there are no more posts to load\",\n        });\n        refs.btnEl.style.display = 'none';\n        return;\n      }\n      const pics = res.data;\n      refs.btnEl.style.display = 'none';\n      refs.textEl.classList.remove('hidden');\n      const markup = renderFunction(pics.hits);\n      refs.listEl.insertAdjacentHTML('beforeend', markup);\n      lightBox.refresh();\n      setTimeout(() => {\n        refs.textEl.classList.add('hidden');\n        refs.btnEl.style.display = 'block';\n      }, 1000);\n    })\n    .catch(error => {\n      iziToast.error(optionsIziToast);\n      refs.textEl.classList.add('hidden');\n      refs.btnEl.style.display = 'none';\n      console.log(error);\n    });\n}\n\n// function update() {\n//   const container = document.querySelector('body');\n//   const elem = document.querySelector('.wrap');\n//   const rect = elem.getBoundingClientRect();\n\n// container.innerHTML = '';\n// for (const key in rect) {\n//   if (typeof rect[key] !== 'function') {\n//     let para = document.createElement('p');\n//     para.textContent = `${key} : ${rect[key]}`;\n//     container.appendChild(para);\n//   }\n// }\n// }\n\n// document.addEventListener('scroll', update);\n// update();\n\n// window.scrollBy(0, 200 * 2);\n"],"names":["pixabayApi","picThema","page","perPage","BASE_URL","params","url","axios","renderFunction","data","item","optionsIziToast","lightBox","SimpleLightbox","refs","totalHits","e","themaOfThePics","res","pics","iziToast","markup","error","handheSecondSubmit"],"mappings":"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"}